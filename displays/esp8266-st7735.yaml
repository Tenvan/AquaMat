#############################################################
# ST7745 Display (TFT 1.8")
# See: https://esphome.io/components/display/st7735.html
#############################################################
#  VCC	Plus
#  GND	Minus
#  CS	Chip Select
#  RST	Reset (RES)
#  A0 – D/C – DC	Data Command
#  SDA – SDI – DIN – MOSI	Data In / Datenleitung (Serial Data Line)
#  SCK – SCK – CLK – SPI Takt	Clock Takt (Serial Clock Line)
#  LED – BL	Hintergund Beleuchtung
#  CE	Chip Enable
#
#  Nachbau: https://lutz-baer.homepage.t-online.de/wordpress/?p=1090
#
#  SCK	sclk	GPIO14      (D5)
#  A0	sda	    GPIO2       (D4)
#  SDA	mosi	GPIOGPIO13  (D7)
#  CS	cs	    GPIO15      (D8)
#  Reset	    rst	RST	    rst -1 (das minus weil an RST – PIN wird nicht benannt)
#  GND	GND	GND	Minus / Masse
#  VCC	3V3		3 Volt

# Board Models:
#  INITR_BLACKTAB
#  INITR_GREENTAB
#  INITR_REDTAB
#  INITR_MINI160X80
#  INITR_18BLACKTAB
#  INITR_18REDTAB

# Anschluss ESP8266 Motor Shield TFT ST7735

#---------------------------------------------------
# DISPLAY --> ESP
#---------------------------------------------------
# VCC	  --> 3V3
# GND     --> GND
# CS      --> D8/GPIO15   CS = Chip Select
# RES     --> -1 (Reset)
# A0      --> D4/GPIO2    A0/DC = Data/Command
# SDA     --> D7/GPIO13   SDA = Serial Data or SPI MOSI
# SCK     --> D5/GPIO14   CLK/SCL = Serial Clock or SPI SCK
# BLK     --> VCC/NULL    BL = Hintergund Beleuchtung
#---------------------------------------------------
#
# Model: INITR_BLACKTAB

display:
  - platform: st7735
    id: mainDisplay
    model: "INITR_BLACKTAB"
    #    reset_pin: -1
    cs_pin: D8
    dc_pin: D0
    rotation: 90
    device_width: 128
    device_height: 160
    col_start: 0
    row_start: 0
    eight_bit_color: false
    update_interval: 5s

    pages:
      - id: Welcome
        lambda: |-
          it.fill(id(Color::WHITE));

          it.strftime(0, 0, id(systemFont), id(Color::BLACK), "%X", id(mytime));
          it.print(0, id(systemFontSize)*12, id(systemFont), id(Color::BLACK), "*");
          
          it.print(0, id(systemFontSize)*2, id(systemFont), id(COLOR_GREEN), TextAlign::TOP_LEFT, "Hello World!");
          it.print(0, id(systemFontSize)*3, id(systemFont), id(COLOR_BLUE), TextAlign::TOP_LEFT, "Hello World!");
          it.print(0, id(systemFontSize)*4, id(systemFont), id(COLOR_RED), TextAlign::TOP_LEFT, "Hello World!");
          it.print(0, id(systemFontSize)*5, id(systemFont), id(COLOR_ORANGE), TextAlign::TOP_LEFT, "Hello World!");

      - id: pageTime
        lambda: |-
          auto fontColor = id(Color::BLACK);
          it.fill(id(COLOR_YELLOW));

          it.strftime(0, 0, id(systemFont), id(Color::BLACK), "%X", id(mytime));
          it.print(0, id(systemFontSize)*12, id(systemFont), id(Color::WHITE), "*");
          
          static int i = 0;
          i++;
          if ((i % 2) == 0)
            it.strftime(0, id(systemFontSize)*2, id(systemFont), fontColor, "%X O.O", id(mytime));
          else
            it.strftime(0, id(systemFontSize)*2, id(systemFont), fontColor, "%X ~.~", id(mytime));
          
          it.strftime(0, id(systemFontSize)*3, id(systemFont), fontColor, "%d.%m.%Y", id(mytime));

          it.print(0, id(systemFontSize)*5, id(systemFont), id(COLOR_RED), "Temperatur:");
          it.print(0, id(systemFontSize)*6, id(systemFont), id(COLOR_RED), " 24.5°C");

      - id: pagePumpe1
        lambda: |-
          auto fontColor = id(Color::WHITE);
          it.fill(id(COLOR_RED));

          it.strftime(0, 0, id(systemFont), "%X", id(mytime));
          it.print(0, id(systemFontSize)*12, id(systemFont), id(Color::WHITE), "*");

          it.printf(0, id(systemFontSize)*2, id(systemFont), fontColor, "Pumpe 1:");
          it.printf(0, id(systemFontSize)*3, id(systemFont), fontColor, "%s", "NPK");
          it.print(0, id(systemFontSize)*5, id(systemFont), fontColor, "Nächste Dosis:");
          it.printf(0, id(systemFontSize)*6, id(systemFont), fontColor, "%03dml %02d:%02d", 30, 1, 5);

      - id: pagePumpe2
        lambda: |-
          auto fontColor = id(COLOR_YELLOW);
          it.fill(id(COLOR_BLUE));

          it.strftime(0, 0, id(systemFont), "%X", id(mytime));
          it.print(0, id(systemFontSize)*12, id(systemFont), id(Color::WHITE), "*");

          it.printf(0, id(systemFontSize)*2, id(systemFont), fontColor, "Pumpe 2:");
          it.printf(0, id(systemFontSize)*3, id(systemFont), fontColor, "%s", "GH Boost");
          it.print(0, id(systemFontSize)*5, id(systemFont), fontColor, "Nächste Dosis:");
          it.printf(0, id(systemFontSize)*6, id(systemFont), fontColor, "%03dml %02d:%02d", 2, 22, 0);

      - id: pagePumpe3
        lambda: |-
          auto fontColor = id(Color::BLACK);

          it.fill(id(COLOR_GREEN));
          it.strftime(0, 0, id(systemFont), id(Color::BLACK), "%X", id(mytime));
          it.print(0, id(systemFontSize)*12, id(systemFont), id(Color::WHITE), "*");

          it.printf(0, id(systemFontSize)*2, id(systemFont), fontColor, "Pumpe 3:");
          it.printf(0, id(systemFontSize)*3, id(systemFont), fontColor, "%s", "Eisen");
          it.print(0, id(systemFontSize)*4, id(systemFont), fontColor, "Nächste Dosis:");
          it.printf(0, id(systemFontSize)*6, id(systemFont), fontColor, "%03dml %02d:%02d", 5, 48, 0);
